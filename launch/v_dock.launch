<?xml version="1.0"?>

<launch>

    <arg name="scan_frame" default="two_d_lidar"/>  <!-- lidar frame wherein scan msg comes from -->
    <arg name="odom_frame" default="odom"/>  <!--     -->
    <arg name="detection_frame" default="detection"/>  <!-- desired name for the detection frame, or v_dock detection frame -->
    <arg name="sector_boundary" default="35"/>  <!-- degrees to the left and right from the v_dock mid-point to make up consideration sector -->
    <arg name="target_length" default="0.55"/>  <!-- \v/ shape : length of each line (55cm) -->
    <arg name="max_gap_threshold" default="0.3"/>  <!-- \ gap / : Define a threshold for the maximum allowed distance between the two lines that make up V -->
    <arg name="linear_velocity" default="0.05"/>  <!-- 0.1: dock speed linear -->
    <arg name="angular_velocity" default="0.1"/>  <!-- 0.1: dock speed angular -->
    <arg name="distance_goal_tolerance" default="0.7"/>  <!-- distance in meters rep tolerance for which robot should stop and goal is accepted as success  -->

    <node name="v_dock_node" pkg="v_dock" type="v_dock_node.py" output="screen">
        <param name="scan_frame" value="$(arg scan_frame)"/>
        <param name="odom_frame" value="$(arg odom_frame)"/>
        <param name="detection_frame" value="$(arg detection_frame)"/>
        <param name="sector_boundary" value="$(arg sector_boundary)"/>
        <param name="target_length" value="$(arg target_length)"/>
        <param name="max_gap_threshold" value="$(arg max_gap_threshold)"/>
        <param name="linear_velocity" value="$(arg linear_velocity)"/>
        <param name="angular_velocity" value="$(arg angular_velocity)"/>
        <param name="distance_goal_tolerance" value="$(arg distance_goal_tolerance)"/>
    </node>


	<node pkg="move_base" type="move_base" respawn="false" name="move_base_node" output="screen">
	    <!-- <remap from="cmd_vel" to="/twist" /> -->

        <!-- Load common configuration files -->
        <rosparam file="$(find v_dock)/config/movebase/move_base_params.yaml" command="load" />
        <rosparam file="$(find v_dock)/config/movebase/costmap_common_params.yaml" command="load" ns="global_costmap" />
        <rosparam file="$(find v_dock)/config/movebase/costmap_common_params.yaml" command="load" ns="local_costmap" />
        <rosparam file="$(find v_dock)/config/movebase/base_local_planner_params.yaml" command="load" />

        <!-- Load global navigation specific parameters -->
        <rosparam file="$(find v_dock)/config/movebase/local_costmap.local" command="load" />
        <rosparam file="$(find v_dock)/config/movebase/global_costmap.local" command="load" />
    </node>


</launch>




